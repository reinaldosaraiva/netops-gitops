apiVersion: config.sdcio.dev/v1alpha1
kind: Config
metadata:
  name: macvrf-vlan30-leaf2
  namespace: sdc
  labels:
    config.sdcio.dev/targetName: nokia-leaf-2
    config.sdcio.dev/targetNamespace: sdc
    vlan: "30"
    purpose: management
spec:
  priority: 30
  config:
  - path: /
    value:
      # 1. Uplink interface with vlan-tagging
      interface:
      - name: ethernet-1/1
        admin-state: enable
        vlan-tagging: true
        subinterface:
        - index: 30
          admin-state: enable
          type: bridged
          vlan:
            encap:
              single-tagged:
                vlan-id: 30
      # 2. Access interface for hosts
      - name: ethernet-1/2
        admin-state: enable
        vlan-tagging: true
        subinterface:
        - index: 30
          admin-state: enable
          type: bridged
          vlan:
            encap:
              single-tagged:
                vlan-id: 30
      # 3. MAC-VRF network-instance
      network-instance:
      - name: vlan30
        type: mac-vrf
        admin-state: enable
        interface:
        - name: ethernet-1/1.30
        - name: ethernet-1/2.30
