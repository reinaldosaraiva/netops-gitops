apiVersion: config.sdcio.dev/v1alpha1
kind: Config
metadata:
  name: arista-vlan10-spine1
  namespace: sdc
  labels:
    config.sdcio.dev/targetName: spine-1-arista
    config.sdcio.dev/targetNamespace: sdc
    vlan: "10"
    purpose: data
spec:
  priority: 30
  config:
  - path: /
    value:
      # 1. VLAN definition in network-instance
      network-instances:
        network-instance:
        - name: default
          vlans:
            vlan:
            - vlan-id: 10
              config:
                vlan-id: 10
                name: DATA
                status: ACTIVE
      # 2. SVI interface for L3 gateway
      interfaces:
        interface:
        - name: Vlan10
          config:
            description: "[VLAN10] Data Network Gateway"
            enabled: true
            type: l3ipvlan
          routed-vlan:
            config:
              vlan: 10
          subinterfaces:
            subinterface:
            - index: 0
              ipv4:
                addresses:
                  address:
                  - ip: 192.168.10.1
                    config:
                      ip: 192.168.10.1
                      prefix-length: 24
                config:
                  enabled: true
        # 3. Trunk port to leafs
        - name: Ethernet1
          ethernet:
            switched-vlan:
              config:
                interface-mode: TRUNK
                trunk-vlans:
                - 10
        - name: Ethernet2
          ethernet:
            switched-vlan:
              config:
                interface-mode: TRUNK
                trunk-vlans:
                - 10
